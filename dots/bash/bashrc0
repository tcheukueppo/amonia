#!/usr/bin/env sh
#########################
#### tcheukueppo's bashrc

####################
### aliases
####################
alias ll='ls --color=auto -lA'
alias ls='ls --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias et='[ -x /tmp/test ] && /tmp/test'

alias mkft='func_makefast'
alias got='func_goto'

####################
### envar def
####################
PS3='>>> '
PS2='>> '
PS1='\[\e[1;32m(\#\e[0m\]\[\e[1;34m,\e[0m\]\[\e[1;36m\j)\e[0m\] \u\[\e[1;35m@\e[0m\]\h \[\e[1;31m\W\e[0m\] $ '
HISTCONTROL=ignoreboth
HISTSIZE=1000000
HISTFILESIZE=10000000
EDITOR="${EDITOR:-/bin/vim}"

####################
### shell options
####################
shopt -s checkwinsize

####################
### functions
####################

func_apath ()
{
	local nwpath="$1"

	if printf '%s' "$PATH" | grep -v ":\?${nwpath%%/}/\?\(:\|$\)"; then
		PATH="${PATH:+$PATH:}$nwpath" && export PATH
	fi
}

func_makefast ()
{
	local shel tmp=/tmp/test

	test $# -eq 0 && return 1

	truncate -s0 $tmp && chmod u+x $tmp
	printf '#!/bin/%s' "$@" > $tmp
	eval ${EDITOR:-vim} $tmp
}

func_goto ()
{
	command -v fzf &>/dev/null || return 1
	eval `history | sed -n 's/^ *[0-9]\+ \+\(.*\)$/\1/p' | grep "^ *cd \+\([/~]\(\w*[/\(\\ \)]*\)*\|'/.\+'\) *$" | sort -u | fzf --layout=reverse`
}

####################
### function call
####################
## append ~/.local/bin to PATH
func_apath "$HOME/.local/bin"
## use tmux on every terminal
if command -v wfmux >/dev/null; then
	test -z "$TMUX" && wfmux -f
fi
